import{i as I,x as m,n as w,d as C,g as b,t as T,w as f,s as P,h as u,c as E,a as S}from"./index-CtUYzmhW.js";import{P as Y}from"./PageElement-DgsZLNNa.js";var $=Object.defineProperty,R=Object.getOwnPropertyDescriptor,_=e=>{throw TypeError(e)},h=(e,t,r,o)=>{for(var a=o>1?void 0:o?R(t,r):t,n=e.length-1,l;n>=0;n--)(l=e[n])&&(a=(o?l(t,r,a):l(a))||a);return o&&a&&$(t,r,a),a},g=(e,t,r)=>t.has(e)||_("Cannot "+r),i=(e,t,r)=>(g(e,t,"read from private field"),t.get(e)),c=(e,t,r)=>t.has(e)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),v=(e,t,r,o)=>(g(e,t,"write to private field"),t.set(e,r),r),s,d;const{promise:A,resolve:O}=Promise.withResolvers();window.YouTubeIframeAPIReady=A;window.onYouTubeIframeAPIReady=function(){O()};let p=class extends I{constructor(){super(...arguments),this.videoId=void 0,this.state=-2,this.startTime=0,c(this,s),c(this,d)}async updated(e){if(e.has("videoId")&&this.videoId!==void 0){{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t)}await window.YouTubeIframeAPIReady,this.resetPlayerWrapper(),v(this,s,new YT.Player(this.playerElement,{height:"100%",width:"100%",videoId:this.videoId,playerVars:{start:this.startTime,playsinline:0},events:{onReady:()=>{this.state=YT.PlayerState.UNSTARTED},onStateChange:t=>{switch(this.state=t.data,t.data){case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:i(this,d)||v(this,d,window.setInterval(()=>{const r=i(this,s).getCurrentTime();this.dispatchEvent(new CustomEvent("time-update",{bubbles:!0,composed:!0,detail:{currentTime:r}}))},250));break;default:i(this,d)&&(clearInterval(i(this,d)),v(this,d,void 0));break}}}}))}}play(){i(this,s).playVideo()}pause(){i(this,s).pauseVideo()}toggle(){if(this.state===-1||this.state===2||this.state===0)return this.play();if(this.state===1)return this.pause()}get currentTime(){return i(this,s).getCurrentTime()}set currentTime(e){this.setCurrentTime(e)}setCurrentTime(e,t=!0){i(this,s).seekTo(e,t)}rewind(e,t=!0){this.setCurrentTime(this.currentTime-(typeof e=="string"?parseFloat(e):e),t)}fastForward(e,t=!0){this.setCurrentTime(this.currentTime+(typeof e=="string"?parseFloat(e):e),t)}setPlaybackrate(e){i(this,s).setPlaybackRate(e)}render(){return m`<div id="player-wrapper" style="height:100%"><div id="player"></div></div>`}resetPlayerWrapper(){this.renderRoot.querySelector("#player-wrapper").innerHTML="<div id=player></div>"}fullscreen(){document.fullscreenElement?document.exitFullscreen():i(this,s).getIframe().requestFullscreen()}};s=new WeakMap;d=new WeakMap;h([w({attribute:"video-id"})],p.prototype,"videoId",2);h([C()],p.prototype,"state",2);h([w({type:Number,attribute:"start-time"})],p.prototype,"startTime",2);h([b("#player")],p.prototype,"playerElement",2);p=h([T("youtube-video"),f(P)],p);new p;var D=Object.getOwnPropertyDescriptor,x=(e,t,r,o)=>{for(var a=o>1?void 0:o?D(t,r):t,n=e.length-1,l;n>=0;n--)(l=e[n])&&(a=l(a)||a);return a};let y=class extends Y{render(){return m`<youtube-video class="h-full" video-id="${u.$("videoId")}" start-time="${u.$("startTime")}" @time-update="${e=>{u.$("startTime",Math.floor(e.detail.currentTime))}}"></youtube-video>`}};y=x([T("video-page"),f(P),E(S`:host{overflow:hidden}`)],y);export{y as VideoPage};
