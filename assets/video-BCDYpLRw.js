import{i as I,x as y,n as w,d as C,g as b,t as T,w as f,s as P,h as u,c as E,a as S}from"./index-Cocfx8NT.js";import{P as Y}from"./PageElement-Bt7QVZTQ.js";var $=Object.defineProperty,R=Object.getOwnPropertyDescriptor,_=e=>{throw TypeError(e)},h=(e,t,r,o)=>{for(var a=o>1?void 0:o?R(t,r):t,n=e.length-1,p;n>=0;n--)(p=e[n])&&(a=(o?p(t,r,a):p(a))||a);return o&&a&&$(t,r,a),a},g=(e,t,r)=>t.has(e)||_("Cannot "+r),s=(e,t,r)=>(g(e,t,"read from private field"),t.get(e)),c=(e,t,r)=>t.has(e)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),v=(e,t,r,o)=>(g(e,t,"write to private field"),t.set(e,r),r),i,d;const{promise:A,resolve:O}=Promise.withResolvers();window.YouTubeIframeAPIReady=A;window.onYouTubeIframeAPIReady=function(){O()};let l=class extends I{constructor(){super(...arguments),this.videoId=void 0,this.state=-2,this.startTime=0,c(this,i),c(this,d)}async updated(e){if(e.has("videoId")&&this.videoId!==void 0){{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t)}await window.YouTubeIframeAPIReady,this.resetPlayerWrapper(),v(this,i,new YT.Player(this.playerElement,{height:"100%",width:"100%",videoId:this.videoId,playerVars:{start:this.startTime,playsinline:0,controls:0,modestbranding:1,showinfo:0,rel:0,fs:0},events:{onReady:()=>{this.state=YT.PlayerState.UNSTARTED},onStateChange:t=>{switch(this.state=t.data,t.data){case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:s(this,d)||v(this,d,window.setInterval(()=>{const r=s(this,i).getCurrentTime();this.dispatchEvent(new CustomEvent("time-update",{bubbles:!0,composed:!0,detail:{currentTime:r}}))},250));break;default:s(this,d)&&(clearInterval(s(this,d)),v(this,d,void 0));break}}}}))}}play(){s(this,i).playVideo()}pause(){s(this,i).pauseVideo()}toggle(){if(this.state===-1||this.state===2||this.state===0)return this.play();if(this.state===1)return this.pause()}get currentTime(){return s(this,i).getCurrentTime()}set currentTime(e){this.setCurrentTime(e)}setCurrentTime(e,t=!0){s(this,i).seekTo(e,t)}rewind(e,t=!0){this.setCurrentTime(this.currentTime-(typeof e=="string"?parseFloat(e):e),t)}fastForward(e,t=!0){this.setCurrentTime(this.currentTime+(typeof e=="string"?parseFloat(e):e),t)}setPlaybackrate(e){s(this,i).setPlaybackRate(e)}render(){return y`<div id="player-wrapper" style="height:100%"><div id="player"></div></div>`}resetPlayerWrapper(){this.renderRoot.querySelector("#player-wrapper").innerHTML="<div id=player></div>"}fullscreen(){document.fullscreenElement?document.exitFullscreen():s(this,i).getIframe().requestFullscreen()}};i=new WeakMap;d=new WeakMap;h([w({attribute:"video-id"})],l.prototype,"videoId",2);h([C()],l.prototype,"state",2);h([w({type:Number,attribute:"start-time"})],l.prototype,"startTime",2);h([b("#player")],l.prototype,"playerElement",2);l=h([T("youtube-video"),f(P)],l);new l;var D=Object.getOwnPropertyDescriptor,x=(e,t,r,o)=>{for(var a=o>1?void 0:o?D(t,r):t,n=e.length-1,p;n>=0;n--)(p=e[n])&&(a=p(a)||a);return a};let m=class extends Y{render(){return y`<youtube-video class="h-full" video-id="${u.$("videoId")}" start-time="${u.$("startTime")}" @time-update="${e=>{u.$("startTime",Math.floor(e.detail.currentTime))}}"></youtube-video>`}};m=x([T("video-page"),f(P),E(S`:host{overflow:hidden}`)],m);export{m as VideoPage};
