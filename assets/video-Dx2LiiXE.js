import{i as b,x as m,n as w,d as I,g as C,t as T,w as P,s as f,h as u,c as R,a as k}from"./index-CUCZWgqJ.js";import{P as E}from"./PageElement-MqmRQIXC.js";var S=Object.defineProperty,Y=Object.getOwnPropertyDescriptor,_=e=>{throw TypeError(e)},h=(e,t,r,o)=>{for(var a=o>1?void 0:o?Y(t,r):t,n=e.length-1,p;n>=0;n--)(p=e[n])&&(a=(o?p(t,r,a):p(a))||a);return o&&a&&S(t,r,a),a},g=(e,t,r)=>t.has(e)||_("Cannot "+r),s=(e,t,r)=>(g(e,t,"read from private field"),t.get(e)),v=(e,t,r)=>t.has(e)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),c=(e,t,r,o)=>(g(e,t,"write to private field"),t.set(e,r),r),i,d;const{promise:$,resolve:A}=Promise.withResolvers();window.YouTubeIframeAPIReady=$;window.onYouTubeIframeAPIReady=function(){A()};let l=class extends b{constructor(){super(...arguments),this.videoId=void 0,this.state=-2,this.startTime=0,v(this,i),v(this,d)}async updated(e){if(e.has("videoId")&&this.videoId!==void 0){{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t)}await window.YouTubeIframeAPIReady,this.resetPlayerWrapper(),c(this,i,new YT.Player(this.playerElement,{height:"100%",width:"100%",videoId:this.videoId,playerVars:{start:this.startTime,playsinline:0},events:{onReady:()=>{this.state=YT.PlayerState.UNSTARTED},onStateChange:t=>{switch(this.state=t.data,t.data){case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:s(this,d)||c(this,d,window.setInterval(()=>{const r=s(this,i).getCurrentTime();this.dispatchEvent(new CustomEvent("time-update",{bubbles:!0,composed:!0,detail:{currentTime:r}}))},250));break;default:s(this,d)&&(clearInterval(s(this,d)),c(this,d,void 0));break}}}}))}}play(){s(this,i).playVideo()}pause(){s(this,i).pauseVideo()}toggle(){if(this.state===-1||this.state===2||this.state===0)return this.play();if(this.state===1)return this.pause()}get currentTime(){return s(this,i).getCurrentTime()}set currentTime(e){this.setCurrentTime(e)}setCurrentTime(e,t=!0){s(this,i).seekTo(e,t)}rewind(e,t=!0){this.setCurrentTime(this.currentTime-(typeof e=="string"?parseFloat(e):e),t)}fastForward(e,t=!0){this.setCurrentTime(this.currentTime+(typeof e=="string"?parseFloat(e):e),t)}get playbackRate(){return s(this,i).getPlaybackRate()}setPlaybackrate(e){s(this,i).setPlaybackRate(e)}increasePlaybackRate(e=.25){this.setPlaybackrate(this.playbackRate+e)}decreasePlaybackRate(e=.25){this.setPlaybackrate(this.playbackRate-e)}render(){return m`<div id="player-wrapper" style="height:100%"><div id="player"></div></div>`}resetPlayerWrapper(){this.renderRoot.querySelector("#player-wrapper").innerHTML="<div id=player></div>"}fullscreen(){document.fullscreenElement?document.exitFullscreen():s(this,i).getIframe().requestFullscreen()}};i=new WeakMap;d=new WeakMap;h([w({attribute:"video-id"})],l.prototype,"videoId",2);h([I()],l.prototype,"state",2);h([w({type:Number,attribute:"start-time"})],l.prototype,"startTime",2);h([C("#player")],l.prototype,"playerElement",2);l=h([T("youtube-video"),P(f)],l);new l;var O=Object.getOwnPropertyDescriptor,D=(e,t,r,o)=>{for(var a=o>1?void 0:o?O(t,r):t,n=e.length-1,p;n>=0;n--)(p=e[n])&&(a=p(a)||a);return a};let y=class extends E{render(){return m`<youtube-video class="h-full" video-id="${u.$("videoId")}" start-time="${u.$("startTime")}" @time-update="${e=>{u.$("startTime",Math.floor(e.detail.currentTime))}}"></youtube-video>`}};y=D([T("video-page"),P(f),R(k`:host{overflow:hidden}`)],y);export{y as VideoPage};
