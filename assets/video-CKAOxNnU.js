import{b as I,x as m,n as f,l as b,a as C,h as w,w as T,s as P,j as u,k as E,f as S}from"./index-y6TYvJ2S.js";import{P as Y}from"./PageElement-Coyk_bzk.js";var $=Object.defineProperty,R=Object.getOwnPropertyDescriptor,_=e=>{throw TypeError(e)},h=(e,t,r,o)=>{for(var a=o>1?void 0:o?R(t,r):t,d=e.length-1,p;d>=0;d--)(p=e[d])&&(a=(o?p(t,r,a):p(a))||a);return o&&a&&$(t,r,a),a},g=(e,t,r)=>t.has(e)||_("Cannot "+r),s=(e,t,r)=>(g(e,t,"read from private field"),t.get(e)),c=(e,t,r)=>t.has(e)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),v=(e,t,r,o)=>(g(e,t,"write to private field"),t.set(e,r),r),i,n;const{promise:A,resolve:O}=Promise.withResolvers();window.YouTubeIframeAPIReady=A;window.onYouTubeIframeAPIReady=function(){O()};let l=class extends I{constructor(){super(...arguments),this.videoId=void 0,this.state=-2,this.startTime=0,c(this,i),c(this,n)}async updated(e){if(e.has("videoId")&&this.videoId!==void 0){{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t)}await window.YouTubeIframeAPIReady,this.resetPlayerWrapper(),v(this,i,new YT.Player(this.playerElement,{height:"100%",width:"100%",videoId:this.videoId,playerVars:{start:this.startTime,playsinline:0,controls:0,modestbranding:1,showinfo:0,rel:0,fs:0},events:{onReady:()=>{this.state=YT.PlayerState.UNSTARTED},onStateChange:t=>{switch(this.state=t.data,t.data){case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:s(this,n)||v(this,n,window.setInterval(()=>{const r=s(this,i).getCurrentTime();this.dispatchEvent(new CustomEvent("time-update",{bubbles:!0,composed:!0,detail:{currentTime:r}}))},250));break;default:s(this,n)&&(clearInterval(s(this,n)),v(this,n,void 0));break}}}}))}}play(){s(this,i).playVideo()}pause(){s(this,i).pauseVideo()}toggle(){if(this.state===-1||this.state===2||this.state===0)return this.play();if(this.state===1)return this.pause()}get currentTime(){return s(this,i).getCurrentTime()}set currentTime(e){s(this,i).seekTo(e,!0)}setPlaybackrate(e){s(this,i).setPlaybackRate(e)}render(){return m`<div id="player-wrapper" style="height:100%"><div id="player"></div></div>`}resetPlayerWrapper(){this.renderRoot.querySelector("#player-wrapper").innerHTML="<div id=player></div>"}fullscreen(){document.fullscreenElement?document.exitFullscreen():s(this,i).getIframe().requestFullscreen()}};i=new WeakMap;n=new WeakMap;h([f({attribute:"video-id"})],l.prototype,"videoId",2);h([b()],l.prototype,"state",2);h([f({type:Number,attribute:"start-time"})],l.prototype,"startTime",2);h([C("#player")],l.prototype,"playerElement",2);l=h([w("youtube-video"),T(P)],l);new l;var D=Object.getOwnPropertyDescriptor,x=(e,t,r,o)=>{for(var a=o>1?void 0:o?D(t,r):t,d=e.length-1,p;d>=0;d--)(p=e[d])&&(a=p(a)||a);return a};let y=class extends Y{render(){return m`<youtube-video class="h-full" video-id="${u.$("videoId")}" start-time="${u.$("startTime")}" @time-update="${e=>{u.$("startTime",Math.floor(e.detail.currentTime))}}"></youtube-video>`}};y=x([w("video-page"),T(P),E(S`:host{overflow:hidden}`)],y);export{y as VideoPage};
